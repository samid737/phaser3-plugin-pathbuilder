!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["PathBuilder.min"]=t():e["PathBuilder.min"]=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=h(n(7)),r=h(n(3)),s=h(n(8)),a=h(n(2)),l=h(n(9)),u=h(n(10)),c=h(n(11));function h(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.elements=[],this.add={menu:function(e,t){var n=new o.default(this.ui,e,t);return this.ui.scene.add.existing(n),n},button:function(e,t,n,i,o,s,a,l,u){var c=new r.default(this.ui,e,t,n,i,o,s,a,l,u);return this.ui.scene.add.existing(c),c},toggle:function(e,t,n,i,o,r,a,l,u){var c=new s.default(this.ui,e,t,n,i,o,r,a,l,u);return this.ui.scene.add.existing(c),c},label:function(e,t,n,i,o,r,s){var a=new c.default(this.ui,e,t,n,i,o,r,s);return this.ui.scene.add.existing(a),a},point:function(e,t,n){var i=new a.default(this.ui,e,t,n);return this.ui.scene.add.existing(i),i},endpoint:function(e,t,n){var i=new l.default(this.ui,e,t,n);return this.ui.scene.add.existing(i),i},controlpoint:function(e,t,n){var i=new u.default(this.ui,e,t,n);return this.ui.scene.add.existing(i),i}},this.add.ui=this,this.camera=this.scene.cameras.add()}return i(e,[{key:"hide",value:function(){this.elements.forEach(function(e){e.visible=!1}),this.scene.switchmode("normal"),this.translate(0,this.scene.cameras.main.height,400,this.scene.unfreeze)}},{key:"show",value:function(){this.elements.forEach(function(e){e.visible=!0}),this.scene.switchmode("normal"),this.translate(0,0,400,this.scene.freeze)}},{key:"translate",value:function(e,t,n,i){this.scene.tweens.add({targets:this.camera,scrollX:e,scrollY:t,duration:n,ease:"Cubic.easeOut"}),this.scene.time.delayedCall(n,i,[],this.scene)}},{key:"update",value:function(){this.elements.forEach(function(e){e.update()})}},{key:"destroy",value:function(){this.elements.forEach(function(e){e.destroy()})}}]),e}();t.default=f,f.fonts={Button:{fontFamily:"Arial",fontSize:16,color:"#00ff00"},Point:{fontFamily:"Arial",fontSize:12,color:"#00ff00"},EndPoint:{fontFamily:"Arial",fontSize:12,color:"#00ff00"},ControlPoint:{fontFamily:"Arial",fontSize:10,color:"#00ff00"},Label:{fontFamily:"Arial",fontSize:16,color:"#ffff00"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){return function(t){function n(e,t,i){var r;!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);for(var s=arguments.length,a=Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];var u=o(this,(r=n.__proto__||Object.getPrototypeOf(n)).call.apply(r,[this,e.scene,t,i].concat(a)));u.ui=e,u.x=t,u.y=i,u.scene=u.ui.scene,u.ui.elements.push(u);var c=(1<<u.scene.cameras.cameras.length)-1;return u.cameraFilter=c&~u.ui.camera.id,o(u,u)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),i(n,[{key:"update",value:function(){}},{key:"toggle",value:function(){this.visible=!this.visible}},{key:"click",value:function(){var e=this.callbackcontext,t=this.args;this.callbacks instanceof Array?this.callbacks.forEach(function(n,i){n.apply(e[i],t)}):this.callbacks.apply(this.callbackcontext,this.args)}},{key:"hover",value:function(){}},{key:"out",value:function(){}}]),n}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(1)),r=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(e,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,o));return s.vec2=new Phaser.Math.Vector2(n,i),s.setInteractive(),s.scene.input.setDraggable(s),s.setData("vector",s.vec2),s.scene.vectors.push(s.vec2),s.on("pointerout",function(e,t){this.scene.pointer.switchCursor(),this.scene.pointer.lbl.visible=!0}),s.on("drag",function(e,t){if(this.scene.gameCanvas.style.cursor="pointer",this.x=this.scene.pointer.x+this.scene.drawpanel.camera.scrollX,this.y=this.scene.pointer.y+this.scene.drawpanel.camera.scrollY,this.scene.pointer.lbl.visible=!1,this.data.get("vector").set(this.x,this.y),this.mapping){var n=this.mapping;for(var i in n.data)n.src[n.data[i].property]=n.data[i].operator(n.src,this[i])}this.scene.graphics.clear(),this.scene.draw()}),s.lbl=s.ui.add.label(s.x+10,s.y+10,"").setFontStyle(r.default.fonts.Point),a(s,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,o.default)(Phaser.GameObjects.Image)),i(t,[{key:"map",value:function(e){this.mapping=e}},{key:"fuse",value:function(e){null!==e&&(this.curve=e,this.curve.controlpoints.push(this))}},{key:"update",value:function(){this.lbl.x=this.x+10,this.lbl.y=this.y+10,this.lbl.setText("x: "+this.x+" y: "+this.y)}},{key:"destroy",value:function(){this.lbl.destroy(),function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},r=a(n(1)),s=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(e,n,i,o,r,a,u,c,h,f){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var p=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,o,s.default.fonts.Button));return p.target=u,p.callbacks=c,p.args=h,p.callbackcontext=f,p.tween=null,p.setInteractive(),p.on("pointerdown",function(e,t){this.click()}),p.on("pointerover",function(e,t){this.hover()}),p.on("pointerout",function(e,t){this.out()}),l(p,p)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,r.default)(Phaser.GameObjects.Text)),i(t,[{key:"click",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"click",this).call(this),this.tween=this.scene.tweens.add({targets:this,scaleX:1.2,scaleY:1.2,duration:100,ease:"Linear",yoyo:!0})}},{key:"hover",value:function(){this.scene.gameCanvas.style.cursor="pointer",this.setScale(1.1,1.1),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hover",this).call(this)}},{key:"out",value:function(){this.scene.pointer.switchCursor(),this.setScale(1,1),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"out",this).call(this)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(1)),r=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,n,i,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,o));return a.alpha=.5,a.delta=1,a.scene.input.on("pointerdown",function(e,t){if("draw"==this.scene.mode&&0==this.scene.input.getDragState(e)&&e.leftButtonDown()&&0==t.length&&e.x>50&&e.x<this.scene.W-100){var n=this.scene.drawpanel.camera.scrollX,i=this.scene.drawpanel.camera.scrollY;this.scene.place(this.scene.drawpanel,this.x+n,this.y+i)}e.rightButtonDown()&&0==this.scene.input.getDragState(e)&&(this.lockX=e.x,this.lockY=e.y,this.scene.switchmode("select")),e.middleButtonDown()&&(this.lastX=e.x+this.scene.drawpanel.camera.scrollX,this.lastY=e.y+this.scene.drawpanel.camera.scrollY,this.scene.switchmode("hand"))},a),a.scene.input.on("pointerup",function(e,t){"hand"==this.scene.mode&&this.scene.switchmode("normal")},a),a.snapkey=a.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),a.lbl=a.ui.add.label(n+20,i+20,"").setFontStyle(r.default.fonts.Label),a.menu=a.ui.add.menu(n,i),a.menu.add(-50,-50,"Line",a.switchdrawmode,["Line"],a),a.menu.add(0,-50,"Quadratic",a.switchdrawmode,["QuadraticBezier"],a),a.menu.add(50,-50,"Cubic",a.switchdrawmode,["CubicBezier"],a),a.menu.add(-50,50,"Spline",a.switchdrawmode,["Spline"],a),a.menu.add(0,50,"Ellipse",a.switchdrawmode,["Ellipse"],a),a.scene.events.on("switchmode",a.switchmode,a),a.scene.add.existing(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,o.default)(Phaser.GameObjects.Image)),i(t,[{key:"switchmode",value:function(e){"draw"==e&&(this.setVisible(!0),this.lbl.setVisible(!0),this.menu.hide()),"normal"==e&&(this.setVisible(!1),this.menu.hide()),"select"==e&&(this.setVisible(!1),this.menu.setPosition(this.x,this.y),this.menu.show()),"hand"==e&&(this.scene.gameCanvas.style.cursor="grab",this.setVisible(!0),this.lbl.setVisible(!0))}},{key:"switchCursor",value:function(){this.scene.gameCanvas.style.cursor=this.scene.cursors[this.scene.mode]}},{key:"switchdrawmode",value:function(e){this.scene.drawmode=e,this.scene.drawmodelabel.setText("curve: "+e),this.menu.hide(),this.scene.switchmode("draw")}},{key:"snap",value:function(){this.delta=1==this.delta?50:1}},{key:"update",value:function(){this.x=this.scene.input.activePointer.x,this.y=this.scene.input.activePointer.y,"hand"==this.scene.mode&&(this.scene.look(this.scene.drawpanel.camera),this.scene.look(this.scene.supercamera)),"select"==this.scene.mode&&Phaser.Math.Distance.Between(this.x,this.y,this.lockX,this.lockY)>150&&this.scene.switchmode("draw"),"select"!==this.scene.mode&&(this.x=Math.round(this.x/this.delta)*this.delta,this.y=Math.round(this.y/this.delta)*this.delta,this.lbl.setPosition(this.x+20,this.y+20),this.lbl.setText("x: "+this.x+" y: "+this.y))}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathBuilder=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(6)),r=a(n(0)),s=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var l=t.PathBuilder=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.registerGameObject("ui",n.addUI),e.registerGameObject("superpointer",n.addPointer),n.game.scene.add("UI",o.default,!0),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Plugins.BasePlugin),i(t,[{key:"addUI",value:function(e){return new r.default(e)}},{key:"addPointer",value:function(e,t,n,i){return new s.default(e,t,n,i)}}]),t}();e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function o(e){return e&&e.__esModule?e:{default:e}}o(n(0)),o(n(4));var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return window.addEventListener&&(window.addEventListener("DOMMouseScroll",n.scroll,!1),window.onmousewheel=n.scroll.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Scene),i(t,[{key:"preload",value:function(){}},{key:"create",value:function(){this.gameCanvas=this.sys.canvas,this.tool={normal:null,draw:this.place},this.mode="normal",this.cursors={normal:"default",draw:"copy",select:"default",hand:"move"},this.curves={Line:Phaser.Curves.Line,Ellipse:Phaser.Curves.Ellipse,QuadraticBezier:Phaser.Curves.QuadraticBezier,CubicBezier:Phaser.Curves.CubicBezier,Spline:Phaser.Curves.Spline},this.events.emit("switchmode",this.mode),this.input.mouse.disableContextMenu(),this.drawmode="CubicBezier",this.vectors=[],this.spline=null,this.path=this.add.path(),this.path.segments=32,this.graphics=this.add.graphics(),this.drawpanel=this.add.ui(this),this.middle=this.add.ui(this),this.top=this.add.ui(this),this.graphics.fillStyle(16711680,1).fillCircle(10,10,8).generateTexture("endpoint",32,32),this.graphics.fillStyle(65280,1).fillCircle(10,10,8).generateTexture("controlpoint",32,32),this.graphics.clear(),this.pointer=this.add.superpointer(this.middle,100,100,"controlpoint"),this.W=this.cameras.main.width,this.H=this.cameras.main.height,this.hidebutton=this.top.add.button(10,300,"hide",null,null,null,[this.drawpanel.hide,this.middle.hide],[],[this.drawpanel,this.middle]),this.showbutton=this.top.add.button(10,350,"show",null,null,null,[this.drawpanel.show,this.middle.show],[],[this.drawpanel,this.middle]),this.viewbutton=this.top.add.button(this.W-100,.1*this.H,"reset view",null,null,null,this.resetView,[],this),this.snapbutton=this.middle.add.toggle(this.W-100,.2*this.H,"snap",null,null,null,this.pointer.snap,[],this.pointer),this.drawbutton=this.middle.add.button(10,200,"draw",null,null,null,this.switchmode,["draw"],this),this.clearbutton=this.middle.add.button(10,100,"clear",null,null,null,this.clear,[],this),this.undobutton=this.middle.add.button(10,50,"undo",null,null,null,this.undo,[],this),this.importbutton=this.middle.add.button(this.W-100,this.H-200,"import",null,null,null,this.importJSON,[],this),this.exportbutton=this.middle.add.button(this.W-100,this.H-100,"export",null,null,null,this.exportJSON,[],this),this.pausebutton=this.middle.add.button(10,this.H-200,"pause",null,null,null,this.freeze,[],this),this.resumebutton=this.middle.add.button(10,this.H-150,"resume",null,null,null,this.unfreeze,[],this),this.previewbutton=this.middle.add.button(10,this.H-100,"preview",null,null,null,this.preview,[],this),this.modelabel=this.middle.add.label(100,20,"mode: ",null,null,null,null,this),this.drawmodelabel=this.middle.add.label(400,20,"curve: "+this.drawmode,null,null,null,null,this),this.setCameras(),this.drawpanel.hide(),this.middle.hide()}},{key:"update",value:function(){this.drawpanel.update(),this.pointer.update()}},{key:"setCameras",value:function(){this.drawpanel.camera.ignore(this.middle.elements),this.drawpanel.camera.ignore(this.top.elements),this.middle.camera.ignore(this.graphics),this.middle.camera.ignore(this.drawpanel.elements),this.middle.camera.ignore(this.top.elements),this.top.camera.ignore(this.graphics),this.top.camera.ignore(this.middle.elements),this.top.camera.ignore(this.drawpanel.elements),this.cameras.main.ignore(this.children.list),this.supercamera=this.scene.manager.scenes[0].cameras.main}},{key:"switchmode",value:function(e){this.mode=e,this.modelabel.setText("mode: "+this.mode),this.pointer.switchCursor(),this.events.emit("switchmode",this.mode)}},{key:"clear",value:function(){var e=this;this.path.curves.forEach(function(t){e.undo()}),this.drawpanel.elements.forEach(function(e){e.destroy()}),this.vectors=[],this.drawpanel.elements=[],this.path.curves=[],this.spline=null,this.graphics.clear()}},{key:"undo",value:function(){if(this.vectors.length>1){var e=this;this.path.curves[this.path.curves.length-1].controlpoints.forEach(function(t){t.destroy(),e.vectors.pop()}),this.path.curves.pop(),this.spline=null,this.graphics.clear(),this.draw()}}},{key:"place",value:function(e,t,n){if(0!=this.vectors.length){if("Line"==this.drawmode){this.spline=null;var i=this.vectors[this.vectors.length-1],o=e.add.endpoint(t,n);if(this.vectors.length>0){var r=new this.curves[this.drawmode](i,o.vec2);this.path.add(r),r.controlpoints=[],o.fuse(r)}}if("QuadraticBezier"==this.drawmode){this.spline=null;var s=this.vectors[this.vectors.length-1],a=e.add.controlpoint(s.x+.5*(t-s.x),s.y+.5*(n-s.y)),l=e.add.endpoint(t,n),u=new this.curves[this.drawmode](s,a.vec2,l.vec2);this.path.add(u),u.controlpoints=[],a.fuse(u),l.fuse(u)}if("CubicBezier"==this.drawmode){this.spline=null;var c=this.vectors[this.vectors.length-1],h=e.add.controlpoint(c.x+.25*(t-c.x),c.y+.25*(n-c.y)),f=e.add.controlpoint(c.x+.75*(t-c.x),c.y+.75*(n-c.y)),p=e.add.endpoint(t,n),d=new this.curves[this.drawmode](c,h.vec2,f.vec2,p.vec2);this.path.add(d),d.controlpoints=[],h.fuse(d),f.fuse(d),p.fuse(d)}if("Spline"==this.drawmode){var y=this.vectors[this.vectors.length-1],v=0;if(null==this.spline){v=e.add.endpoint(t,n);var b=new this.curves[this.drawmode]([y.x,y.y,v.vec2.x,v.vec2.y]);this.spline=b,this.path.add(b),b.controlpoints=[]}this.path.segments+=8,1==this.vectors.length?v=e.add.controlpoint(t,n):(v=e.add.controlpoint(t,n),this.spline.addPoints([t,n])),this.spline.points[this.spline.points.length-1]=v.vec2,this.spline.points[this.spline.points.length-2]=y,v.fuse(this.spline)}if("Ellipse"==this.drawmode){this.spline=null,this.vectors[this.vectors.length-1];var m=e.add.endpoint(t,n),w=e.add.controlpoint(t+100,n+100),g=new this.curves[this.drawmode](m.vec2.x,m.vec2.y,100,100);this.path.add(g),g.controlpoints=[],m.fuse(g),w.fuse(g),g.p0=m,w.map({src:g,data:{x:{property:"xRadius",operator:function(e,t){return e.p0.vec2.x-t}},y:{property:"yRadius",operator:function(e,t){return e.p0.vec2.y-t}}}})}this.draw(),this.setCameras()}else e.add.endpoint(t,n)}},{key:"move",value:function(e,t){}},{key:"draw",value:function(){this.graphics.clear(),this.graphics.lineStyle(2,16777215,1).fillStyle(16777215,1),this.path.draw(this.graphics,this.path.segments)}},{key:"look",value:function(e){e.scrollY=this.pointer.lastY-this.input.activePointer.y,e.scrollX=this.pointer.lastX-this.input.activePointer.x}},{key:"scroll",value:function(e){var t=0;return e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t>0&&(this.gameCanvas.style.cursor="zoom-in"),t<0&&(this.gameCanvas.style.cursor="zoom-out"),this.time.delayedCall(250,this.pointer.switchCursor,[],this.pointer),this.drawpanel.camera.setZoom(this.drawpanel.camera.zoom+.1*t),this.drawpanel.camera.zoom+=.1*t,this.supercamera.zoom+=.1*t,t}},{key:"resetView",value:function(){this.drawpanel.camera.setZoom(1).setScroll(0,0),this.supercamera.setZoom(1).setScroll(0,0)}},{key:"freeze",value:function(){this.scene.manager.scenes[0].scene.pause()}},{key:"unfreeze",value:function(){this.scene.manager.scenes[0].scene.resume()}},{key:"importJSON",value:function(){var e=this.cache.json.get("data");this.path=this.path.fromJSON(e),this.draw()}},{key:"exportJSON",value:function(){var e=JSON.stringify(this.path.toJSON());console.log(e);var t=new Blob([e],["path.json"]),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="path.json",n.click()}},{key:"preview",value:function(){if(0!==this.path.curves.length){var e=this.add.follower(this.path,0,0,"dude");this.cameras.main.ignore(e),this.middle.camera.ignore(e),this.top.camera.ignore(e),e.startFollow({duration:2e3,rotateToPath:!0,yoyo:!0,onComplete:function(e,t,n){n.destroy()},onCompleteParams:[e],ease:"Cubic.easeInOut"})}}},{key:"destroy",value:function(){}}]),t}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(1)),r=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,o.default)(Phaser.GameObjects.Container)),i(t,[{key:"add",value:function(e,n,i,o,s,a){return this[i]=this.ui.add.button(e,n,i,null,null,null,o,s,a).setFontStyle(r.default.fonts.Button),function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,this[i]),this[i]}},{key:"update",value:function(){}},{key:"hide",value:function(){this.list.forEach(function(e){e.setVisible(!1)})}},{key:"show",value:function(){this.list.forEach(function(e){e.setVisible(!0)})}},{key:"divide",value:function(){}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},r=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}s(n(0));var a=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return r.setColor("#ff0000"),r.val=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),i(t,[{key:"click",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"click",this).call(this),this.val=!this.val,this.val?this.setColor("#00ff00"):this.setColor("#ff0000")}},{key:"hover",value:function(){this.scene.gameCanvas.style.cursor="pointer",this.setScale(1.1,1.1),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hover",this).call(this)}},{key:"out",value:function(){this.scene.pointer.switchCursor(),this.setScale(1,1),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"out",this).call(this)}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"endpoint";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r));return a.lbl.setFontStyle(o.default.fonts.EndPoint),s(a,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"controlpoint";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r));return a.setScale(.75,.75),a.lbl.setFontStyle(o.default.fonts.ControlPoint),a.lbl.visible=!1,a.on("pointermove",function(e,t){this.lbl.visible=!0}),a.on("pointerout",function(e,t){this.lbl.visible=!1}),a.on("dragend",function(e,t){this.lbl.visible=!1}),s(a,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(e,n,i,r,a,l,u,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var h=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,o.default.fonts.Label));return h.target=a,h.callbacks=l,h.callbackcontext=c,h.args=u,h.tween=null,h.setInteractive(),s(h,h)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,i.default)(Phaser.GameObjects.Text)),t}();t.default=a}])});